(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(27)},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(10),c=a.n(s),l=(a(25),a(3)),i=a(4),o=a(1),u=a(11),b=a(12),m=a(16),d=a(13),h=a(17),f=a(14),p=a.n(f),v=a(29),y=a(30),O=(a(26),a(28));var g=function(e){var t=e.orders,a=void 0===t?{}:t,n=Object.entries(a).map(function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];return r.a.createElement("tr",{key:a},r.a.createElement("td",null,Number(a).toLocaleString(window.navigator.language,{style:"currency",currency:"USD"})),r.a.createElement("td",null,n))});return r.a.createElement(O.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",className:"OrderList__container"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Price (USD)"),r.a.createElement("th",null,"Amount"))),r.a.createElement("tbody",{className:"OrderList__container"},n))},j=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).refWebSocket=void 0,a.state={sell:{},buy:{},lastUpdate:(new Date).getTime(),currentTime:(new Date).getTime()},a}return Object(h.a)(t,e),Object(b.a)(t,[{key:"shouldComponentUpdate",value:function(){var e=this.state.currentTime-this.state.lastUpdate>=1e3;return e&&this.setState({lastUpdate:this.state.currentTime}),e}},{key:"filterUpdates",value:function(e,t){return Object.entries(e).filter(function(e){var t=Object(o.a)(e,2)[1];return Number(t)>0}).sort((a=t,function(e,t){var n=Object(o.a)(e,1)[0],r=Object(o.a)(t,1)[0],s="asc"===a?-1:1,c=Number(n),l=Number(r);return c<l?-1*s:c>l?1*s:0})).reduce(function(e,t){var a=Object(o.a)(t,2),n=a[0],r=a[1];return Object(i.a)({},e,Object(l.a)({},n,r))},{});var a}},{key:"handleData",value:function(e){var t=JSON.parse(e);if("error"===t.type)console.log("error",t);else if("l2update"===t.type){var a=t.changes.reduce(function(e,t){var a=Object(o.a)(t,3),n=a[0],r=a[1],s=a[2];return Object(i.a)({},e,Object(l.a)({},n,Object(i.a)({},e[n],Object(l.a)({},r,s))))},{buy:{},sell:{}}),n=Object(i.a)({},this.state.sell,a.sell),r=Object(i.a)({},this.state.buy,a.buy);this.setState({currentTime:(new Date).getTime(),sell:this.filterUpdates(n,"desc"),buy:this.filterUpdates(r,"asc")})}else if("snapshot"===t.type){var s=function(e){return e.slice(0,50).reduce(function(e,t){var a=Object(o.a)(t,2),n=a[0],r=a[1];return Object(i.a)({},e,Object(l.a)({},n,r))},{})},c=t,u=c.asks,b=c.bids,m=s(u),d=s(b);this.setState({sell:m,buy:d,currentTime:(new Date).getTime()})}}},{key:"onOpen",value:function(){console.log("Subscribing to BTC-USD"),this.refWebSocket.sendMessage(JSON.stringify({type:"subscribe",product_ids:["BTC-USD"],channels:["level2"]}))}},{key:"onClose",value:function(){console.log("Closing subscription to BTC-USD"),this.refWebSocket.sendMessage(JSON.stringify({type:"unsubscribe",product_ids:["BTC-USD"],channels:["level2"]}))}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.sell)[0]||0,a=Object.keys(this.state.buy)[0]||0,n=Number(t)-Number(a);return r.a.createElement(v.a,{className:"App"},r.a.createElement(p.a,{url:"wss://ws-feed.pro.coinbase.com",debug:!0,onMessage:this.handleData.bind(this),onOpen:this.onOpen.bind(this),onClose:this.onClose.bind(this),ref:function(t){e.refWebSocket=t}}),r.a.createElement(y.a,{xs:"12",className:"App-content"},r.a.createElement(v.a,null,r.a.createElement(y.a,{sm:"12"},r.a.createElement("h2",null,"Spread"),r.a.createElement("hr",null),n.toLocaleString(window.navigator.language,{style:"currency",currency:"USD"}))),r.a.createElement(v.a,null,r.a.createElement(y.a,{sm:"6"},r.a.createElement("h1",null,"Sell"),r.a.createElement(g,{orders:this.state.sell})),r.a.createElement(y.a,{sm:"6"},r.a.createElement("h1",null,"Buy"),r.a.createElement(g,{orders:this.state.buy})))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,1,2]]]);
//# sourceMappingURL=main.381ad672.chunk.js.map